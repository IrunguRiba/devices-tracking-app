
<div class="notification-container" *ngIf="showNotification">
  <div class="notification-card">
    <div class="loader"></div>

    <div class="notification-content">
      <h4>Location Access Notice</h4>
      <p>
        Sharing a PIN allows others to view your
        <strong>real-time location</strong>.
        Only share it with people you trust.
      </p>

      <button class="learn-more">
        <span class="circle"></span>
        <span class="button-text">I Understand</span>
      </button>
    </div>
  </div>
</div>


<div *ngIf="!showTrackSection" class="dashboard-container">

  <div class="stat-card">
    <div class="stat-content">
      <span class="stat-title">
        <strong>I-TRACK</strong> lets you track devices in real-time.<br>
        <em>Active Devices</em>
      </span>
    </div>

    <a (click)="goToDevices()">
      <img [src]="sharePic" class="stat-icon">
    </a>

    <span class="stat-value">{{ numberOfDevices }}</span>
  </div>

  <div class="stat-card">
    <div class="stat-content">
      <span class="stat-title">
        <strong>NEW!</strong> Track another device using a PIN.<br>
        <em>Advanced Features</em>
      </span>
    </div>

    <a (click)="openAdvancedTracking()">
      <img [src]="sharePic" class="stat-icon">
    </a>
  </div>

</div>


<div *ngIf="showTrackSection" class="track-section">
  <h2 id="title">Track By PIN</h2>

  <div class="otp-input-container">
    <ng-otp-input
    [config]="otpConfig"
    (onInputChange)="onOtpChange($event)" class="otp-input">
    
  </ng-otp-input>

  <button class="validate" (click)="onEnterPin()">
    Validate
  </button>
  </div>


  <div class="trackingDevicesContainer" *ngIf="trackingDevices.length > 0">
    <h2 class="liveDevices">Live Location</h2>
  
    <div class="tracked-user">
      <ng-container *ngIf="userLatestLocation; else noLocation">
        <div class="user-header">
          <span class="username">{{ trackingDevices[0].User.userName }}</span>
        </div>
        <div class="location-row">
          <div class="location-icon-container">
            <img [src]="locationPic" class="locationPic" alt="Live">
            <span class="location-text">
              Lat: {{ userLatestLocation.latitude }}, Lon: {{ userLatestLocation.longitude }}
            </span>
          </div>
        </div>
        
      </ng-container>
  
      <ng-template #noLocation >
        <p class="no-location">
          {{ trackingDevices[0].User.userName }} has no location available
        </p>
      </ng-template>
    </div>
  </div>
  
  
